const searchIcon=document.querySelector("#search-icon"),hamburguerBtn=document.querySelector(".hamburguer"),brandSelect=document.querySelector("#brand"),yearSelect=document.querySelector("#year"),minPrice=document.querySelector("#min"),maxPrice=document.querySelector("#max"),doorsSelect=document.querySelector("#doors"),transmissionSelect=document.querySelector("#transmission"),colorSelect=document.querySelector("#color"),results=document.querySelector("#results"),searchData={year:"",brand:"",minPrice:"",maxPrice:"",doors:"",transmission:"",color:""};function startApp(){eventListeners(),showCars(cars),fillCarsSelects(cars),actualDate()}function eventListeners(){searchIcon.addEventListener("click",openSearchbar),hamburguerBtn.addEventListener("click",openNav),window.addEventListener("click",closeOutsideClick),window.addEventListener("scroll",colorHeaderScroll),brandSelect.addEventListener("change",e=>{const t=e.target.value;searchData.brand=t,filterCar()}),yearSelect.addEventListener("change",e=>{const t=parseInt(e.target.value);searchData.year=t,filterCar()}),minPrice.addEventListener("change",e=>{const t=e.target.value;searchData.minPrice=t,filterCar()}),maxPrice.addEventListener("change",e=>{const t=e.target.value;searchData.maxPrice=t,filterCar()}),doorsSelect.addEventListener("change",e=>{const t=e.target.value;searchData.doors=t,filterCar()}),transmissionSelect.addEventListener("change",e=>{const t=e.target.value;searchData.transmission=t,filterCar()}),colorSelect.addEventListener("change",e=>{const t=e.target.value;searchData.color=t,filterCar()})}function openSearchbar(){const e=document.querySelector("#search-box");e.classList.toggle("search-box--active"),e.classList.toggle("search-box__contenedor")}function openNav(){document.querySelector(".nav").classList.toggle("nav--active")}function closeOutsideClick(e){const t=e.target,r=document.querySelector("#search-box"),n=document.querySelector(".nav");r.classList.contains("search-box--active")&&t!==searchIcon&&!r.contains(t)&&r.classList.remove("search-box--active","search-box__contenedor"),n.classList.contains("nav--active")&&t!==hamburguerBtn&&n.classList.remove("nav--active"),closeOnScroll(n,r)}function closeOnScroll(e,t){window.addEventListener("scroll",()=>{e.classList.remove("nav--active"),t.classList.remove("search-box--active","search-box__contenedor")})}function colorHeaderScroll(){const e=document.querySelector(".header"),t=window.scrollY;e.classList.toggle("header__bg",t>100)}function showCars(e){cleanHTML(),e.forEach(e=>{const{img:t,year:r,brand:n,model:a,price:c,doors:s,transmission:o}=e;let l=Math.floor(100*Math.random());const i=`\n        <picture>\n          <source srcset="${t}.avif" type="image/avif" />\n          <source srcset="${t}.webp" type="image/webp" />\n          <img\n            class="car__img"\n            loading="lazy"\n            width="500"\n            height="300"\n            src="${t}.jpg"\n            alt=""\n          />\n        </picture>\n        <span class="car__year">${r}</span>\n        <div class="car__content">\n          <h2 class="car__model">${n} ${a}</h2>\n          <p class="car__price">\n            $${c.toLocaleString()}\n            <i class="bx bxs-star car__price--reviews">(${l} Rese√±as)</i>\n          </p>\n          <p class="car__character">\n            <i class="bx bxs-door-open car__icon"></i>\n            ${s} Puertas\n          </p>\n          <p class="car__character">\n            <i class="bx bxs-car car__icon"></i>\n            ${o}\n          </p>\n          <div class="car__btns">\n            <a href="#" class="car__btn">Comprar</a>\n            <a href="#" class="car__details">Ver detalles</a>\n          </div>\n        </div>\n`,d=document.createElement("div");d.classList.add("car"),d.innerHTML=i,results.appendChild(d)})}function cleanHTML(){for(;results.firstChild;)results.removeChild(results.firstChild)}function fillCarsSelects(e){fillSelect(e.map(({brand:e})=>e).filter((e,t,r)=>r.indexOf(e)===t),brandSelect),fillSelect(e.map(({doors:e})=>e).filter((e,t,r)=>r.indexOf(e)===t),doorsSelect),fillSelect(e.map(({color:e})=>e).filter((e,t,r)=>r.indexOf(e)===t),colorSelect),fillYearSelect()}function fillYearSelect(){const e=(new Date).getFullYear(),t=e-10;for(let r=e;r>=t;r--){const e=createOption(r);yearSelect.appendChild(e)}}function fillSelect(e,t){e.forEach(e=>{const r=createOption(e);t.appendChild(r)})}function createOption(e){const t=document.createElement("option");return t.value=e,t.textContent=e,t}function filterCar(){const e=cars.filter(filterBrand).filter(filterYear).filter(filterPrice).filter(filterDoors).filter(filterTransmission).filter(filterColor);e.length?showCars(e):noResults()}function noResults(){cleanHTML();const e=document.createElement("p");e.classList.add("alerta"),e.textContent="No se encontraron resultados, prueba de nuevo",results.appendChild(e)}function filterBrand(e){const{brand:t}=searchData;return t?e.brand===t:e}function filterYear(e){const{year:t}=searchData;return t?e.year===t:e}function filterPrice(e){const{minPrice:t,maxPrice:r}=searchData;return t&&r?e.price>=t&&e.price<=r:t?e.price>=t:r?e.price<=r:e}function filterDoors(e){const{doors:t}=searchData;return t?e.doors===parseInt(t):e}function filterTransmission(e){const{transmission:t}=searchData;return t?e.transmission.toLowerCase()==t:e}function filterColor(e){const{color:t}=searchData;return t?e.color===t:e}function actualDate(){const e=document.querySelector(".footerDate");let t=(new Date).getFullYear();e.textContent=t}document.addEventListener("DOMContentLoaded",startApp);
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImFwcC5qcyJdLCJuYW1lcyI6WyJzZWFyY2hJY29uIiwiZG9jdW1lbnQiLCJxdWVyeVNlbGVjdG9yIiwiaGFtYnVyZ3VlckJ0biIsImJyYW5kU2VsZWN0IiwieWVhclNlbGVjdCIsIm1pblByaWNlIiwibWF4UHJpY2UiLCJkb29yc1NlbGVjdCIsInRyYW5zbWlzc2lvblNlbGVjdCIsImNvbG9yU2VsZWN0IiwicmVzdWx0cyIsInNlYXJjaERhdGEiLCJ5ZWFyIiwiYnJhbmQiLCJkb29ycyIsInRyYW5zbWlzc2lvbiIsImNvbG9yIiwic3RhcnRBcHAiLCJldmVudExpc3RlbmVycyIsInNob3dDYXJzIiwiY2FycyIsImZpbGxDYXJzU2VsZWN0cyIsImFjdHVhbERhdGUiLCJhZGRFdmVudExpc3RlbmVyIiwib3BlblNlYXJjaGJhciIsIm9wZW5OYXYiLCJ3aW5kb3ciLCJjbG9zZU91dHNpZGVDbGljayIsImNvbG9ySGVhZGVyU2Nyb2xsIiwiZSIsInNlbGVjdGVkVmFsdWUiLCJ0YXJnZXQiLCJ2YWx1ZSIsImZpbHRlckNhciIsInBhcnNlSW50Iiwic2VhcmNoQm94IiwiY2xhc3NMaXN0IiwidG9nZ2xlIiwicmVmZXJlbmNlIiwibmF2IiwiY29udGFpbnMiLCJyZW1vdmUiLCJjbG9zZU9uU2Nyb2xsIiwiaGVhZGVyIiwic2Nyb2xsUG9zWSIsInNjcm9sbFkiLCJjbGVhbkhUTUwiLCJmb3JFYWNoIiwiY2FyIiwiaW1nIiwibW9kZWwiLCJwcmljZSIsInJhbmRvbU51bWJlciIsIk1hdGgiLCJmbG9vciIsInJhbmRvbSIsImNhckNhcmQiLCJ0b0xvY2FsZVN0cmluZyIsImNhckhUTUwiLCJjcmVhdGVFbGVtZW50IiwiYWRkIiwiaW5uZXJIVE1MIiwiYXBwZW5kQ2hpbGQiLCJmaXJzdENoaWxkIiwicmVtb3ZlQ2hpbGQiLCJmaWxsU2VsZWN0IiwibWFwIiwiZmlsdGVyIiwiaW5kZXgiLCJjYXJCcmFuZHMiLCJpbmRleE9mIiwiY2FyRG9vcnMiLCJjYXJDb2xvcnMiLCJmaWxsWWVhclNlbGVjdCIsInllYXJNYXgiLCJEYXRlIiwiZ2V0RnVsbFllYXIiLCJ5ZWFyTWluIiwiaSIsIm9wdGlvbiIsImNyZWF0ZU9wdGlvbiIsImNhcnNEYXRhIiwic2VsZWN0RWxlbWVudCIsImNhckRhdGEiLCJ0ZXh0Q29udGVudCIsInJlc3VsdCIsImZpbHRlckJyYW5kIiwiZmlsdGVyWWVhciIsImZpbHRlclByaWNlIiwiZmlsdGVyRG9vcnMiLCJmaWx0ZXJUcmFuc21pc3Npb24iLCJmaWx0ZXJDb2xvciIsImxlbmd0aCIsIm5vUmVzdWx0cyIsIm5vUmVzdWx0IiwidG9Mb3dlckNhc2UiLCJmb290ZXJEYXRlIiwiZGF0ZURheSJdLCJtYXBwaW5ncyI6IkFBQ0EsTUFBTUEsV0FBYUMsU0FBU0MsY0FBYyxnQkFDcENDLGNBQWdCRixTQUFTQyxjQUFjLGVBR3ZDRSxZQUFjSCxTQUFTQyxjQUFjLFVBQ3JDRyxXQUFhSixTQUFTQyxjQUFjLFNBQ3BDSSxTQUFXTCxTQUFTQyxjQUFjLFFBQ2xDSyxTQUFXTixTQUFTQyxjQUFjLFFBQ2xDTSxZQUFjUCxTQUFTQyxjQUFjLFVBQ3JDTyxtQkFBcUJSLFNBQVNDLGNBQWMsaUJBQzVDUSxZQUFjVCxTQUFTQyxjQUFjLFVBR3JDUyxRQUFVVixTQUFTQyxjQUFjLFlBRWpDVSxXQUFhLENBQ2pCQyxLQUFNLEdBQ05DLE1BQU8sR0FDUFIsU0FBVSxHQUNWQyxTQUFVLEdBQ1ZRLE1BQU8sR0FDUEMsYUFBYyxHQUNkQyxNQUFPLElBTVQsU0FBU0MsV0FDUEMsaUJBQ0FDLFNBQVNDLE1BQ1RDLGdCQUFnQkQsTUFDaEJFLGFBR0YsU0FBU0osaUJBR1BuQixXQUFXd0IsaUJBQWlCLFFBQVNDLGVBQ3JDdEIsY0FBY3FCLGlCQUFpQixRQUFTRSxTQUd4Q0MsT0FBT0gsaUJBQWlCLFFBQVNJLG1CQUVqQ0QsT0FBT0gsaUJBQWlCLFNBQVVLLG1CQUdsQ3pCLFlBQVlvQixpQkFBaUIsU0FBV00sSUFDdEMsTUFBTUMsRUFBZ0JELEVBQUVFLE9BQU9DLE1BRS9CckIsV0FBV0Us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RWpCLE9BQUlDLEVBQ0tvQyxFQUFJcEMsT0FBU0EsRUFHZm9DLEVBR1QsU0FBU3dDLFlBQVl4QyxHQUNuQixNQUFNM0MsU0FBRUEsRUFBUUMsU0FBRUEsR0FBYUssV0FFL0IsT0FBSU4sR0FBWUMsRUFDUDBDLEVBQUlHLE9BQVM5QyxHQUFZMkMsRUFBSUcsT0FBUzdDLEVBRzNDRCxFQUNLMkMsRUFBSUcsT0FBUzlDLEVBQ1hDLEVBQ0YwQyxFQUFJRyxPQUFTN0MsRUFHZjBDLEVBR1QsU0FBU3lDLFlBQVl6QyxHQUNuQixNQUFNbEMsTUFBRUEsR0FBVUgsV0FFbEIsT0FBSUcsRUFDS2tDLEVBQUlsQyxRQUFVb0IsU0FBU3BCLEdBR3pCa0MsRUFHVCxTQUFTMEMsbUJBQW1CMUMsR0FDMUIsTUFBTWpDLGFBQUVBLEdBQWlCSixXQUV6QixPQUFJSSxFQUNLaUMsRUFBSWpDLGFBQWFnRixlQUFpQmhGLEVBR3BDaUMsRUFHVCxTQUFTMkMsWUFBWTNDLEdBQ25CLE1BQU1oQyxNQUFFQSxHQUFVTCxXQUVsQixPQUFJSyxFQUNLZ0MsRUFBSWhDLFFBQVVBLEVBR2hCZ0MsRUFHVCxTQUFTMUIsYUFDUCxNQUFNMEUsRUFBYWhHLFNBQVNDLGNBQWMsZUFDMUMsSUFBSWdHLEdBQVUsSUFBSXRCLE1BQU9DLGNBRXpCb0IsRUFBV1osWUFBY2EsRUFoVjNCakcsU0FBU3VCLGlCQUFpQixtQkFBb0JOIiwiZmlsZSI6ImFwcC5qcyIsInNvdXJjZXNDb250ZW50IjpbIi8vIFZhcmlhYmxlcyBuYXZlZ2FjaW9uXHJcbmNvbnN0IHNlYXJjaEljb24gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKGAjc2VhcmNoLWljb25gKTtcclxuY29uc3QgaGFtYnVyZ3VlckJ0biA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoYC5oYW1idXJndWVyYCk7XHJcblxyXG4vLyBWYXJpYWJsZXMgZmlsdHJvIGRlIGJ1c3F1ZWRhXHJcbmNvbnN0IGJyYW5kU2VsZWN0ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihgI2JyYW5kYCk7XHJcbmNvbnN0IHllYXJTZWxlY3QgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKGAjeWVhcmApO1xyXG5jb25zdCBtaW5QcmljZSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoYCNtaW5gKTtcclxuY29uc3QgbWF4UHJpY2UgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKGAjbWF4YCk7XHJcbmNvbnN0IGRvb3JzU2VsZWN0ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihgI2Rvb3JzYCk7XHJcbmNvbnN0IHRyYW5zbWlzc2lvblNlbGVjdCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoYCN0cmFuc21pc3Npb25gKTtcclxuY29uc3QgY29sb3JTZWxlY3QgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKGAjY29sb3JgKTtcclxuXHJcbi8vIENvbnRlbmVkb3IgZGUgcmVzdWx0YWRvc1xyXG5jb25zdCByZXN1bHRzID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihgI3Jlc3VsdHNgKTtcclxuXHJcbmNvbnN0IHNlYXJjaERhdGEgPSB7XHJcbiAgeWVhcjogYGAsXHJcbiAgYnJhbmQ6IGBgLFxyXG4gIG1pblByaWNlOiBgYCxcclxuICBtYXhQcmljZTogYGAsXHJcbiAgZG9vcnM6IGBgLFxyXG4gIHRyYW5zbWlzc2lvbjogYGAsXHJcbiAgY29sb3I6IGBgLFxyXG59O1xyXG5cclxuLy8gRXZlbnRvc1xyXG5kb2N1bWVudC5hZGRFdmVudExpc3RlbmVyKGBET01Db250ZW50TG9hZGVkYCwgc3RhcnRBcHApO1xyXG5cclxuZnVuY3Rpb24gc3RhcnRBcHAoKSB7XHJcbiAgZXZlbnRMaXN0ZW5lcnMoKTtcclxuICBzaG93Q2FycyhjYXJzKTtcclxuICBmaWxsQ2Fyc1NlbGVjdHMoY2Fycyk7XHJcbiAgYWN0dWFsRGF0ZSgpO1xyXG59XHJcblxyXG5mdW5jdGlvbiBldmVudExpc3RlbmVycygpIHtcclxuICAvLyBFdmVudG9zIGRlbCBzZWFyY2hCYXIgeSBOYXYuXHJcblxyXG4gIHNlYXJjaEljb24uYWRkRXZlbnRMaXN0ZW5lcihgY2xpY2tgLCBvcGVuU2VhcmNoYmFyKTtcclxuICBoYW1idXJndWVyQnRuLmFkZEV2ZW50TGlzdGVuZXIoYGNsaWNrYCwgb3Blbk5hdik7XHJcblxyXG4gIC8vIENlcnJhciBlbCBzZWFyY2hiYXIgeSBlbCBuYXYgYWwgaGFjZXIgY2xpY2sgZW4gY3VhbHF1aWVyIHBhcnRlIGRlbCBkb2N1bWVudG8uXHJcbiAgd2luZG93LmFkZEV2ZW50TGlzdGVuZXIoYGNsaWNrYCwgY2xvc2VPdXRzaWRlQ2xpY2spO1xyXG4gIC8vIENhbWJpYXIgZWwgY29sb3IgZGVsIGhlYWRlciBhbCBoYWNlciBzY3JvbGwuXHJcbiAgd2luZG93LmFkZEV2ZW50TGlzdGVuZXIoYHNjcm9sbGAsIGNvbG9ySGVhZGVyU2Nyb2xsKTtcclxuXHJcbiAgLy8gRXZlbnRvcyBwYXJhIGVsIGZpbHRybyBkZSBiw7pzcXVlZGEuXHJcbiAgYnJhbmRTZWxlY3QuYWRkRXZlbnRMaXN0ZW5lcihgY2hhbmdlYCwgKGUpID0+IHtcclxuICAgIGNvbnN0IHNlbGVjdGVkVmFsdWUgPSBlLnRhcmdldC52YWx1ZTtcclxuXHJcbiAgICBzZWFyY2hEYXRhLmJyYW5kID0gc2VsZWN0ZWRWYWx1ZTtcclxuXHJcbiAgICBmaWx0ZXJDYXIoKTtcclxuICB9KTtcclxuXHJcbiAgeWVhclNlbGVjdC5hZGRFdmVudExpc3RlbmVyKGBjaGFuZ2VgLCAoZSkgPT4ge1xyXG4gICAgY29uc3Qgc2VsZWN0ZWRWYWx1ZSA9IHBhcnNlSW50KGUudGFyZ2V0LnZhbHVlKTtcclxuXHJcbiAgICBzZWFyY2hEYXRhLnllYXIgPSBzZWxlY3RlZFZhbHVlO1xyXG5cclxuICAgIGZpbHRlckNhcigpO1xyXG4gIH0pO1xyXG5cclxuICBtaW5QcmljZS5hZGRFdmVudExpc3RlbmVyKGBjaGFuZ2VgLCAoZSkgPT4ge1xyXG4gICAgY29uc3Qgc2VsZWN0ZWRWYWx1ZSA9IGUudGFyZ2V0LnZhbHVlO1xyXG5cclxuICAgIHNlYXJjaERhdGEubWluUHJpY2UgPSBzZWxlY3RlZFZhbHVlO1xyXG5cclxuICAgIGZpbHRlckNhcigpO1xyXG4gIH0pO1xyXG5cclxuICBtYXhQcmljZS5hZGRFdmVudExpc3RlbmVyKGBjaGFuZ2VgLCAoZSkgPT4ge1xyXG4gICAgY29uc3Qgc2VsZWN0ZWRWYWx1ZSA9IGUudGFyZ2V0LnZhbHVlO1xyXG5cclxuICAgIHNlYXJjaERhdGEubWF4UHJpY2UgPSBzZWxlY3RlZFZhbHVlO1xyXG5cclxuICAgIGZpbHRlckNhcigpO1xyXG4gIH0pO1xyXG5cclxuICBkb29yc1NlbGVjdC5hZGRFdmVudExpc3RlbmVyKGBjaGFuZ2VgLCAoZSkgPT4ge1xyXG4gICAgY29uc3Qgc2VsZWN0ZWRWYWx1ZSA9IGUudGFyZ2V0LnZhbHVlO1xyXG5cclxuICAgIHNlYXJjaERhdGEuZG9vcnMgPSBzZWxlY3RlZFZhbHVlO1xyXG5cclxuICAgIGZpbHRlckNhcigpO1xyXG4gIH0pO1xyXG5cclxuICB0cmFuc21pc3Npb25TZWxlY3QuYWRkRXZlbnRMaXN0ZW5lcihgY2hhbmdlYCwgKGUpID0+IHtcclxuICAgIGNvbnN0IHNlbGVjdGVkVmFsdWUgPSBlLnRhcmdldC52YWx1ZTtcclxuXHJcbiAgICBzZWFyY2hEYXRhLnRyYW5zbWlzc2lvbiA9IHNlbGVjdGVkVmFsdWU7XHJcblxyXG4gICAgZmlsdGVyQ2FyKCk7XHJcbiAgfSk7XHJcblxyXG4gIGNvbG9yU2VsZWN0LmFkZEV2ZW50TGlzdGVuZXIoYGNoYW5nZWAsIChlKSA9PiB7XHJcbiAgICBjb25zdCBzZWxlY3RlZFZhbHVlID0gZS50YXJnZXQudmFsdWU7XHJcblxyXG4gICAgc2VhcmNoRGF0YS5jb2xvciA9IHNlbGVjdGVkVmFsdWU7XHJcblxyXG4gICAgZmlsdGVyQ2FyKCk7XHJcbiAgfSk7XHJcblxyXG4gIC8vIGNvbnNvbGUubG9nKHNlYXJjaERhdGEpO1xyXG59XHJcblxyXG4vLyBGdW5jaW9uZXNcclxuZnVuY3Rpb24gb3BlblNlYXJjaGJhcigpIHtcclxuICBjb25zdCBzZWFyY2hCb3ggPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKGAjc2VhcmNoLWJveGApO1xyXG5cclxuICBzZWFyY2hCb3guY2xhc3NMaXN0LnRvZ2dsZShgc2VhcmNoLWJveC0tYWN0aXZlYCk7XHJcbiAgc2VhcmNoQm94LmNsYXNzTGlzdC50b2dnbGUoYHNlYXJjaC1ib3hfX2NvbnRlbmVkb3JgKTtcclxufVxyXG5cclxuZnVuY3Rpb24gb3Blbk5hdigpIHtcclxuICBjb25zdCBuYXYgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKGAubmF2YCk7XHJcblxyXG4gIG5hdi5jbGFzc0xpc3QudG9nZ2xlKGBuYXYtLWFjdGl2ZWApO1xyXG59XHJcblxyXG5mdW5jdGlvbiBjbG9zZU91dHNpZGVDbGljayhlKSB7XHJcbiAgY29uc3QgcmVmZXJlbmNlID0gZS50YXJnZXQ7XHJcbiAgY29uc3Qgc2VhcmNoQm94ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihgI3NlYXJjaC1ib3hgKTtcclxuICBjb25zdCBuYXYgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKGAubmF2YCk7XHJcblxyXG4gIC8qIFxyXG4gICAgIDEtIFZlcmlmaWNhIHNpIGVsIHNlYXJjaGJhciBlc3TDoSBhYmllcnRvLlxyXG4gICAgIDItIFJldmlzYSBzaSBlbCBjbGljayBubyBvY3VycmnDsyBlbiBlbCBpY29uby4gXHJcbiAgICAgMy0gVmUgc2kgZWwgY2xpY2sgbm8gb2N1cnJpw7MgZGVudHJvIGRlbCBzZWFyY2hiYXIuXHJcbiAgKi9cclxuICBpZiAoXHJcbiAgICBzZWFyY2hCb3guY2xhc3NMaXN0LmNvbnRhaW5zKGBzZWFyY2gtYm94LS1hY3RpdmVgKSAmJlxyXG4gICAgcmVmZXJlbmNlICE9PSBzZWFyY2hJY29uICYmXHJcbiAgICAhc2VhcmNoQm94LmNvbnRhaW5zKHJlZmVyZW5jZSlcclxuICApIHtcclxuICAgIC8vIENpZXJyYSBlbCBzZWFyY2hCYXIgYWwgZWxpbWluYXIgbGEgY2xhc2UgcXVlIGxvIGhhY2UgdmlzaWJsZVxyXG4gICAgc2VhcmNoQm94LmNsYXNzTGlzdC5yZW1vdmUoYHNlYXJjaC1ib3gtLWFjdGl2ZWAsIGBzZWFyY2gtYm94X19jb250ZW5lZG9yYCk7XHJcbiAgfVxyXG5cclxuICAvKiBcclxuICAgIDEtIFZlcmlmaWNhIHNpIGxhIGNsYXNlIGBuYXYtLWFjdGl2ZWAgZXhpc3RlLlxyXG4gICAgMi0gUmV2aXNhIHNpIGVsIGNsaWNrIG5vIG9jdXJyacOzIGVuIGVsIGJvdG9uIGhhbWJ1cmd1ZXNhLlxyXG4gICovXHJcbiAgaWYgKG5hdi5jbGFzc0xpc3QuY29udGFpbnMoYG5hdi0tYWN0aXZlYCkgJiYgcmVmZXJlbmNlICE9PSBoYW1idXJndWVyQnRuKSB7XHJcbiAgICBuYXYuY2xhc3NMaXN0LnJlbW92ZShgbmF2LS1hY3RpdmVgKTtcclxuICB9XHJcblxyXG4gIGNsb3NlT25TY3JvbGwobmF2LCBzZWFyY2hCb3gpO1xyXG59XHJcblxyXG5mdW5jdGlvbiBjbG9zZU9uU2Nyb2xsKG5hdiwgc2VhcmNoQm94KSB7XHJcbiAgd2luZG93LmFkZEV2ZW50TGlzdGVuZXIoYHNjcm9sbGAsICgpID0+IHtcclxuICAgIG5hdi5jbGFzc0xpc3QucmVtb3ZlKGBuYXYtLWFjdGl2ZWApO1xyXG4gICAgc2VhcmNoQm94LmNsYXNzTGlzdC5yZW1vdmUoYHNlYXJjaC1ib3gtLWFjdGl2ZWAsIGBzZWFyY2gtYm94X19jb250ZW5lZG9yYCk7XHJcbiAgfSk7XHJcbn1cclxuXHJcbmZ1bmN0aW9uIGNvbG9ySGVhZGVyU2Nyb2xsKCkge1xyXG4gIGNvbnN0IGhlYWRlciA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoYC5oZWFkZXJgKTtcclxuICBjb25zdCBzY3JvbGxQb3NZID0gd2luZG93LnNjcm9sbFk7XHJcblxyXG4gIGhlYWRlci5jbGFzc0xpc3QudG9nZ2xlKGBoZWFkZXJfX2JnYCwgc2Nyb2xsUG9zWSA+IDEwMCk7XHJcbn1cclxuXHJcbmZ1bmN0aW9uIHNob3dDYXJzKGNhcnMpIHtcclxuICAvLyBMaW1waWEgZWwgSFRNTCBwcmV2aW9cclxuICBjbGVhbkhUTUwoKTtcclxuXHJcbiAgY2Fycy5mb3JFYWNoKChjYXIpID0+IHtcclxuICAgIGNvbnN0IHsgaW1nLCB5ZWFyLCBicmFuZCwgbW9kZWwsIHByaWNlLCBkb29ycywgdHJhbnNtaXNzaW9uIH0gPSBjYXI7XHJcbiAgICBsZXQgcmFuZG9tTnVtYmVyID0gTWF0aC5mbG9vcihNYXRoLnJhbmRvbSgpICogMTAwKTtcclxuICAgIGNvbnN0IGNhckNhcmQgPSBgXHJcbiAgICAgICAgPHBpY3R1cmU+XHJcbiAgICAgICAgICA8c291cmNlIHNyY3NldD1cIiR7aW1nfS5hdmlmXCIgdHlwZT1cImltYWdlL2F2aWZcIiAvPlxyXG4gICAgICAgICAgPHNvdXJjZSBzcmNzZXQ9XCIke2ltZ30ud2VicFwiIHR5cGU9XCJpbWFnZS93ZWJwXCIgLz5cclxuICAgICAgICAgIDxpbWdcclxuICAgICAgICAgICAgY2xhc3M9XCJjYXJfX2ltZ1wiXHJcbiAgICAgICAgICAgIGxvYWRpbmc9XCJsYXp5XCJcclxuICAgICAgICAgICAgd2lkdGg9XCI1MDBcIlxyXG4gICAgICAgICAgICBoZWlnaHQ9XCIzMDBcIlxyXG4gICAgICAgICAgICBzcmM9XCIke2ltZ30uanBnXCJcclxuICAgICAgICAgICAgYWx0PVwiXCJcclxuICAgICAgICAgIC8+XHJcbiAgICAgICAgPC9waWN0dXJlPlxyXG4gICAgICAgIDxzcGFuIGNsYXNzPVwiY2FyX195ZWFyXCI+JHt5ZWFyfTwvc3Bhbj5cclxuICAgICAgICA8ZGl2IGNsYXNzPVwiY2FyX19jb250ZW50XCI+XHJcbiAgICAgICAgICA8aDIgY2xhc3M9XCJjYXJfX21vZGVsXCI+JHticmFuZH0gJHttb2RlbH08L2gyPlxyXG4gICAgICAgICAgPHAgY2xhc3M9XCJjYXJfX3ByaWNlXCI+XHJcbiAgICAgICAgICAgICQke3ByaWNlLnRvTG9jYWxlU3RyaW5nKCl9XHJcbiAgICAgICAgICAgIDxpIGNsYXNzPVwiYnggYnhzLXN0YXIgY2FyX19wcmljZS0tcmV2aWV3c1wiPigke3JhbmRvbU51bWJlcn0gUmVzZcOxYXMpPC9pPlxyXG4gICAgICAgICAgPC9wPlxyXG4gICAgICAgICAgPHAgY2xhc3M9XCJjYXJfX2NoYXJhY3RlclwiPlxyXG4gICAgICAgICAgICA8aSBjbGFzcz1cImJ4IGJ4cy1kb29yLW9wZW4gY2FyX19pY29uXCI+PC9pPlxyXG4gICAgICAgICAgICAke2Rvb3JzfSBQdWVydGFzXHJcbiAgICAgICAgICA8L3A+XHJcbiAgICAgICAgICA8cCBjbGFzcz1cImNhcl9fY2hhcmFjdGVyXCI+XHJcbiAgICAgICAgICAgIDxpIGNsYXNzPVwiYnggYnhzLWNhciBjYXJfX2ljb25cIj48L2k+XHJcbiAgICAgICAgICAgICR7dHJhbnNtaXNzaW9ufVxyXG4gICAgICAgICAgPC9wPlxyXG4gICAgICAgICAgPGRpdiBjbGFzcz1cImNhcl9fYnRuc1wiPlxyXG4gICAgICAgICAgICA8YSBocmVmPVwiI1wiIGNsYXNzPVwiY2FyX19idG5cIj5Db21wcmFyPC9hPlxyXG4gICAgICAgICAgICA8YSBocmVmPVwiI1wiIGNsYXNzPVwiY2FyX19kZXRhaWxzXCI+VmVyIGRldGFsbGVzPC9hPlxyXG4gICAgICAgICAgPC9kaXY+XHJcbiAgICAgICAgPC9kaXY+XHJcbmA7XHJcblxyXG4gICAgY29uc3QgY2FySFRNTCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoYGRpdmApO1xyXG4gICAgY2FySFRNTC5jbGFzc0xpc3QuYWRkKGBjYXJgKTtcclxuICAgIGNhckhUTUwuaW5uZXJIVE1MID0gY2FyQ2FyZDtcclxuXHJcbiAgICByZXN1bHRzLmFwcGVuZENoaWxkKGNhckhUTUwpO1xyXG4gIH0pO1xyXG59XHJcblxyXG5mdW5jdGlvbiBjbGVhbkhUTUwoKSB7XHJcbiAgd2hpbGUgKHJlc3VsdHMuZmlyc3RDaGlsZCkge1xyXG4gICAgcmVzdWx0cy5yZW1vdmVDaGlsZChyZXN1bHRzLmZpcnN0Q2hpbGQpO1xyXG4gIH1cclxufVxyXG5cclxuZnVuY3Rpb24gZmlsbENhcnNTZWxlY3RzKGNhcnMpIHtcclxuICBsZXQgY2FyQnJhbmRzID0gY2Fyc1xyXG4gICAgLm1hcCgoeyBicmFuZCB9KSA9PiBicmFuZClcclxuICAgIC5maWx0ZXIoKGJyYW5kLCBpbmRleCwgY2FyQnJhbmRzKSA9PiBjYXJCcmFuZHMuaW5kZXhPZihicmFuZCkgPT09IGluZGV4KTtcclxuXHJcbiAgZmlsbFNlbGVjdChjYXJCcmFuZHMsIGJyYW5kU2VsZWN0KTtcclxuXHJcbiAgbGV0IGNhckRvb3JzID0gY2Fyc1xyXG4gICAgLm1hcCgoeyBkb29ycyB9KSA9PiBkb29ycylcclxuICAgIC5maWx0ZXIoKGRvb3JzLCBpbmRleCwgY2FyRG9vcnMpID0+IGNhckRvb3JzLmluZGV4T2YoZG9vcnMpID09PSBpbmRleCk7XHJcblxyXG4gIGZpbGxTZWxlY3QoY2FyRG9vcnMsIGRvb3JzU2VsZWN0KTtcclxuXHJcbiAgbGV0IGNhckNvbG9ycyA9IGNhcnNcclxuICAgIC5tYXAoKHsgY29sb3IgfSkgPT4gY29sb3IpXHJcbiAgICAuZmlsdGVyKChjb2xvciwgaW5kZXgsIGNhckNvbG9ycykgPT4gY2FyQ29sb3JzLmluZGV4T2YoY29sb3IpID09PSBpbmRleCk7XHJcblxyXG4gIGZpbGxTZWxlY3QoY2FyQ29sb3JzLCBjb2xvclNlbGVjdCk7XHJcblxyXG4gIGZpbGxZZWFyU2VsZWN0KCk7XHJcbn1cclxuXHJcbmZ1bmN0aW9uIGZpbGxZZWFyU2VsZWN0KCkge1xyXG4gIGNvbnN0IHllYXJNYXggPSBuZXcgRGF0ZSgpLmdldEZ1bGxZZWFyKCk7XHJcbiAgY29uc3QgeWVhck1pbiA9IHllYXJNYXggLSAxMDtcclxuXHJcbiAgZm9yIChsZXQgaSA9IHllYXJNYXg7IGkgPj0geWVhck1pbjsgaS0tKSB7XHJcbiAgICBjb25zdCBvcHRpb24gPSBjcmVhdGVPcHRpb24oaSk7XHJcbiAgICB5ZWFyU2VsZWN0LmFwcGVuZENoaWxkKG9wdGlvbik7XHJcbiAgfVxyXG59XHJcblxyXG5mdW5jdGlvbiBmaWxsU2VsZWN0KGNhcnNEYXRhLCBzZWxlY3RFbGVtZW50KSB7XHJcbiAgY2Fyc0RhdGEuZm9yRWFjaCgoY2FyRGF0YSkgPT4ge1xyXG4gICAgY29uc3Qgb3B0aW9uID0gY3JlYXRlT3B0aW9uKGNhckRhdGEpO1xyXG4gICAgc2VsZWN0RWxlbWVudC5hcHBlbmRDaGlsZChvcHRpb24pO1xyXG4gIH0pO1xyXG59XHJcblxyXG5mdW5jdGlvbiBjcmVhdGVPcHRpb24odmFsdWUpIHtcclxuICBjb25zdCBvcHRpb24gPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KGBvcHRpb25gKTtcclxuICBvcHRpb24udmFsdWUgPSB2YWx1ZTtcclxuICBvcHRpb24udGV4dENvbnRlbnQgPSB2YWx1ZTtcclxuXHJcbiAgcmV0dXJuIG9wdGlvbjtcclxufVxyXG5cclxuZnVuY3Rpb24gZmlsdGVyQ2FyKCkge1xyXG4gIGNvbnN0IHJlc3VsdCA9IGNhcnNcclxuICAgIC5maWx0ZXIoZmlsdGVyQnJhbmQpXHJcbiAgICAuZmlsdGVyKGZpbHRlclllYXIpXHJcbiAgICAuZmlsdGVyKGZpbHRlclByaWNlKVxyXG4gICAgLmZpbHRlcihmaWx0ZXJEb29ycylcclxuICAgIC5maWx0ZXIoZmlsdGVyVHJhbnNtaXNzaW9uKVxyXG4gICAgLmZpbHRlcihmaWx0ZXJDb2xvcik7XHJcblxyXG4gIGlmIChyZXN1bHQubGVuZ3RoKSB7XHJcbiAgICBzaG93Q2FycyhyZXN1bHQpO1xyXG4gIH0gZWxzZSB7XHJcbiAgICBub1Jlc3VsdHMoKTtcclxuICB9XHJcbn1cclxuXHJcbmZ1bmN0aW9uIG5vUmVzdWx0cygpIHtcclxuICBjbGVhbkhUTUwoKTtcclxuXHJcbiAgY29uc3Qgbm9SZXN1bHQgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KGBwYCk7XHJcbiAgbm9SZXN1bHQuY2xhc3NMaXN0LmFkZChgYWxlcnRhYCk7XHJcbiAgbm9SZXN1bHQudGV4dENvbnRlbnQgPSBgTm8gc2UgZW5jb250cmFyb24gcmVzdWx0YWRvcywgcHJ1ZWJhIGRlIG51ZXZvYDtcclxuXHJcbiAgcmVzdWx0cy5hcHBlbmRDaGlsZChub1Jlc3VsdCk7XHJcbn1cclxuXHJcbmZ1bmN0aW9uIGZpbHRlckJyYW5kKGNhcikge1xyXG4gIGNvbnN0IHsgYnJhbmQgfSA9IHNlYXJjaERhdGE7XHJcbiAgaWYgKGJyYW5kKSB7XHJcbiAgICByZXR1cm4gY2FyLmJyYW5kID09PSBicmFuZDtcclxuICB9XHJcblxyXG4gIHJldHVybiBjYXI7XHJcbn1cclxuXHJcbmZ1bmN0aW9uIGZpbHRlclllYXIoY2FyKSB7XHJcbiAgY29uc3QgeyB5ZWFyIH0gPSBzZWFyY2hEYXRhO1xyXG5cclxuICBpZiAoeWVhcikge1xyXG4gICAgcmV0dXJuIGNhci55ZWFyID09PSB5ZWFyO1xyXG4gIH1cclxuXHJcbiAgcmV0dXJuIGNhcjtcclxufVxyXG5cclxuZnVuY3Rpb24gZmlsdGVyUHJpY2UoY2FyKSB7XHJcbiAgY29uc3QgeyBtaW5QcmljZSwgbWF4UHJpY2UgfSA9IHNlYXJjaERhdGE7XHJcblxyXG4gIGlmIChtaW5QcmljZSAmJiBtYXhQcmljZSkge1xyXG4gICAgcmV0dXJuIGNhci5wcmljZSA+PSBtaW5QcmljZSAmJiBjYXIucHJpY2UgPD0gbWF4UHJpY2U7XHJcbiAgfVxyXG5cclxuICBpZiAobWluUHJpY2UpIHtcclxuICAgIHJldHVybiBjYXIucHJpY2UgPj0gbWluUHJpY2U7XHJcbiAgfSBlbHNlIGlmIChtYXhQcmljZSkge1xyXG4gICAgcmV0dXJuIGNhci5wcmljZSA8PSBtYXhQcmljZTtcclxuICB9XHJcblxyXG4gIHJldHVybiBjYXI7XHJcbn1cclxuXHJcbmZ1bmN0aW9uIGZpbHRlckRvb3JzKGNhcikge1xyXG4gIGNvbnN0IHsgZG9vcnMgfSA9IHNlYXJjaERhdGE7XHJcblxyXG4gIGlmIChkb29ycykge1xyXG4gICAgcmV0dXJuIGNhci5kb29ycyA9PT0gcGFyc2VJbnQoZG9vcnMpO1xyXG4gIH1cclxuXHJcbiAgcmV0dXJuIGNhcjtcclxufVxyXG5cclxuZnVuY3Rpb24gZmlsdGVyVHJhbnNtaXNzaW9uKGNhcikge1xyXG4gIGNvbnN0IHsgdHJhbnNtaXNzaW9uIH0gPSBzZWFyY2hEYXRhO1xyXG5cclxuICBpZiAodHJhbnNtaXNzaW9uKSB7XHJcbiAgICByZXR1cm4gY2FyLnRyYW5zbWlzc2lvbi50b0xvd2VyQ2FzZSgpID09IHRyYW5zbWlzc2lvbjtcclxuICB9XHJcblxyXG4gIHJldHVybiBjYXI7XHJcbn1cclxuXHJcbmZ1bmN0aW9uIGZpbHRlckNvbG9yKGNhcikge1xyXG4gIGNvbnN0IHsgY29sb3IgfSA9IHNlYXJjaERhdGE7XHJcblxyXG4gIGlmIChjb2xvcikge1xyXG4gICAgcmV0dXJuIGNhci5jb2xvciA9PT0gY29sb3I7XHJcbiAgfVxyXG5cclxuICByZXR1cm4gY2FyO1xyXG59XHJcblxyXG5mdW5jdGlvbiBhY3R1YWxEYXRlKCkge1xyXG4gIGNvbnN0IGZvb3RlckRhdGUgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKGAuZm9vdGVyRGF0ZWApO1xyXG4gIGxldCBkYXRlRGF5ID0gbmV3IERhdGUoKS5nZXRGdWxsWWVhcigpO1xyXG5cclxuICBmb290ZXJEYXRlLnRleHRDb250ZW50ID0gZGF0ZURheTtcclxufVxyXG4iXX0=
