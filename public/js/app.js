const searchIcon=document.querySelector("#search-icon"),hamburguerBtn=document.querySelector(".hamburguer"),brandSelect=document.querySelector("#brand"),yearSelect=document.querySelector("#year"),minPrice=document.querySelector("#min"),maxPrice=document.querySelector("#max"),doorsSelect=document.querySelector("#doors"),transmissionSelect=document.querySelector("#transmission"),colorSelect=document.querySelector("#color"),results=document.querySelector("#results"),searchData={year:"",brand:"",minPrice:"",maxPrice:"",doors:"",transmission:"",color:""};function startApp(){eventListeners(),showCars(cars)}function eventListeners(){searchIcon.addEventListener("click",openSearchbar),hamburguerBtn.addEventListener("click",openNav),window.addEventListener("click",closeOutsideClick),window.addEventListener("scroll",colorHeaderScroll),brandSelect.addEventListener("change",e=>{const c=e.target.value;searchData.brand=c}),yearSelect.addEventListener("change",e=>{const c=e.target.value;searchData.year=c}),minPrice.addEventListener("change",e=>{const c=e.target.value;searchData.minPrice=c}),maxPrice.addEventListener("change",e=>{const c=e.target.value;searchData.maxPrice=c}),doorsSelect.addEventListener("change",e=>{const c=e.target.value;searchData.doors=c}),transmissionSelect.addEventListener("change",e=>{const c=e.target.value;searchData.transmission=c}),colorSelect.addEventListener("change",e=>{const c=e.target.value;searchData.color=c})}function openSearchbar(){const e=document.querySelector("#search-box");e.classList.toggle("search-box--active"),e.classList.toggle("search-box__contenedor")}function openNav(){document.querySelector(".nav").classList.toggle("nav--active")}function closeOutsideClick(e){const c=e.target,t=document.querySelector("#search-box"),n=document.querySelector(".nav");t.classList.contains("search-box--active")&&c!==searchIcon&&!t.contains(c)&&t.classList.remove("search-box--active","search-box__contenedor"),n.classList.contains("nav--active")&&c!==hamburguerBtn&&n.classList.remove("nav--active"),closeOnScroll(n,t)}function closeOnScroll(e,c){window.addEventListener("scroll",()=>{e.classList.remove("nav--active"),c.classList.remove("search-box--active","search-box__contenedor")})}function colorHeaderScroll(){const e=document.querySelector(".header");if(window.scrollY>90)return e.style.backgroundColor="White",void(searchIcon.style.color="Black");e.style.backgroundColor="transparent",searchIcon.style.color`inherit`}function showCars(e){e.forEach(e=>{const{img:c,year:t,brand:n,model:r,price:a,doors:s,transmission:o}=e;let l=Math.floor(101*Math.random());const i=`\n        <picture>\n          <source srcset="${c}.avif" type="image/avif" />\n          <source srcset="${c}.webp" type="image/webp" />\n          <img\n            class="car__img"\n            loading="lazy"\n            width="500"\n            height="300"\n            src="${c}.jpg"\n            alt=""\n          />\n        </picture>\n        <span class="car__year">${t}</span>\n        <div class="car__content">\n          <h2 class="car__model">${n} ${r}</h2>\n          <p class="car__price">\n            $${a.toLocaleString()}\n            <i class="bx bxs-star car__price--reviews">(${l} Rese√±as)</i>\n          </p>\n          <p class="car__character">\n            <i class="bx bxs-door-open car__icon"></i>\n            ${s} Puertas\n          </p>\n          <p class="car__character">\n            <i class="bx bxs-car car__icon"></i>\n            ${o}\n          </p>\n          <div class="car__btns">\n            <a href="#" class="car__btn">Comprar</a>\n            <a href="#" class="car__details">Ver detalles</a>\n          </div>\n        </div>\n`,d=document.createElement("div");d.classList.add("car"),d.innerHTML=i,results.appendChild(d)}),fillCarsSelects(e)}function fillCarsSelects(e){let c=e.map(({brand:e})=>e).filter((e,c,t)=>t.indexOf(e)===c),t=[],n=[];e.forEach(e=>{const{doors:c,color:r}=e;t.includes(c)||t.push(c),n.includes(r)||n.push(r)}),fillYearSelect(),fillSelect(c,brandSelect),fillSelect(t,doorsSelect),fillSelect(n,colorSelect)}function fillYearSelect(){const e=(new Date).getFullYear(),c=e-10;for(let t=e;t>=c;t--){const e=createOption(t);yearSelect.appendChild(e)}}function fillSelect(e,c){e.forEach(e=>{const t=createOption(e);c.appendChild(t)})}function createOption(e){const c=document.createElement("option");return c.value=e,c.textContent=e,c}document.addEventListener("DOMContentLoaded",startApp);
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImFwcC5qcyJdLCJuYW1lcyI6WyJzZWFyY2hJY29uIiwiZG9jdW1lbnQiLCJxdWVyeVNlbGVjdG9yIiwiaGFtYnVyZ3VlckJ0biIsImJyYW5kU2VsZWN0IiwieWVhclNlbGVjdCIsIm1pblByaWNlIiwibWF4UHJpY2UiLCJkb29yc1NlbGVjdCIsInRyYW5zbWlzc2lvblNlbGVjdCIsImNvbG9yU2VsZWN0IiwicmVzdWx0cyIsInNlYXJjaERhdGEiLCJ5ZWFyIiwiYnJhbmQiLCJkb29ycyIsInRyYW5zbWlzc2lvbiIsImNvbG9yIiwic3RhcnRBcHAiLCJldmVudExpc3RlbmVycyIsInNob3dDYXJzIiwiY2FycyIsImFkZEV2ZW50TGlzdGVuZXIiLCJvcGVuU2VhcmNoYmFyIiwib3Blbk5hdiIsIndpbmRvdyIsImNsb3NlT3V0c2lkZUNsaWNrIiwiY29sb3JIZWFkZXJTY3JvbGwiLCJlIiwic2VsZWN0ZWRWYWx1ZSIsInRhcmdldCIsInZhbHVlIiwic2VhcmNoQm94IiwiY2xhc3NMaXN0IiwidG9nZ2xlIiwicmVmZXJlbmNlIiwibmF2IiwiY29udGFpbnMiLCJyZW1vdmUiLCJjbG9zZU9uU2Nyb2xsIiwiaGVhZGVyIiwic2Nyb2xsWSIsInN0eWxlIiwiYmFja2dyb3VuZENvbG9yIiwiZm9yRWFjaCIsImNhciIsImltZyIsIm1vZGVsIiwicHJpY2UiLCJyYW5kb21OdW1iZXIiLCJNYXRoIiwiZmxvb3IiLCJyYW5kb20iLCJjYXJDYXJkIiwidG9Mb2NhbGVTdHJpbmciLCJjYXJIVE1MIiwiY3JlYXRlRWxlbWVudCIsImFkZCIsImlubmVySFRNTCIsImFwcGVuZENoaWxkIiwiZmlsbENhcnNTZWxlY3RzIiwiY2FyQnJhbmRzIiwibWFwIiwiZmlsdGVyIiwiaW5kZXgiLCJpbmRleE9mIiwiY2FyRG9vcnMiLCJjYXJDb2xvcnMiLCJpbmNsdWRlcyIsInB1c2giLCJmaWxsWWVhclNlbGVjdCIsImZpbGxTZWxlY3QiLCJ5ZWFyTWF4IiwiRGF0ZSIsImdldEZ1bGxZZWFyIiwieWVhck1pbiIsImkiLCJvcHRpb24iLCJjcmVhdGVPcHRpb24iLCJjYXJzRGF0YSIsInNlbGVjdEVsZW1lbnQiLCJjYXJEYXRhIiwidGV4dENvbnRlbnQiXSwibWFwcGluZ3MiOiJBQUNBLE1BQU1BLFdBQWFDLFNBQVNDLGNBQWMsZ0JBQ3BDQyxjQUFnQkYsU0FBU0MsY0FBYyxlQUd2Q0UsWUFBY0gsU0FBU0MsY0FBYyxVQUNyQ0csV0FBYUosU0FBU0MsY0FBYyxTQUNwQ0ksU0FBV0wsU0FBU0MsY0FBYyxRQUNsQ0ssU0FBV04sU0FBU0MsY0FBYyxRQUNsQ00sWUFBY1AsU0FBU0MsY0FBYyxVQUNyQ08sbUJBQXFCUixTQUFTQyxjQUFjLGlCQUM1Q1EsWUFBY1QsU0FBU0MsY0FBYyxVQUdyQ1MsUUFBVVYsU0FBU0MsY0FBYyxZQUVqQ1UsV0FBYSxDQUNqQkMsS0FBTSxHQUNOQyxNQUFPLEdBQ1BSLFNBQVUsR0FDVkMsU0FBVSxHQUNWUSxNQUFPLEdBQ1BDLGFBQWMsR0FDZEMsTUFBTyxJQU1ULFNBQVNDLFdBQ1BDLGlCQUNBQyxTQUFTQyxNQUdYLFNBQVNGLGlCQUdQbkIsV0FBV3NCLGlCQUFpQixRQUFTQyxlQUNyQ3BCLGNBQWNtQixpQkFBaUIsUUFBU0UsU0FHeENDLE9BQU9ILGlCQUFpQixRQUFTSSxtQkFFakNELE9BQU9ILGlCQUFpQixTQUFVSyxtQkFHbEN2QixZQUFZa0IsaUJBQWlCLFNBQVdNLElBQ3RDLE1BQU1DLEVBQWdCRCxFQUFFRSxPQUFPQyxNQUUvQm5CLFdBQVdFLE1BQVFlLElBR3JCeEIsV0FBV2lCLGlCQUFpQixTQUFXTSxJQUNyQyxNQUFNQyxFQUFnQkQsRUFBRUUsT0FBT0MsTUFFL0JuQixXQUFXQyxLQUFPZ0IsSUFHcEJ2QixTQUFTZ0IsaUJBQWlCLFNBQVdNLElBQ25DLE1BQU1DLEVBQWdCRCxFQUFFRSxPQUFPQyxNQUUvQm5CLFdBQVdOLFNBQVd1QixJQUd4QnRCLFNBQVNlLGlCQUFpQixTQUFXTSxJQUNuQyxNQUFNQyxFQUFnQkQsRUFBRUUsT0FBT0MsTUFFL0JuQixX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QUssQ0FDdkMsTUFBTUMsRUFBU0MsYUFBYUYsR0FDNUJ2RSxXQUFXc0QsWUFBWWtCLElBSTNCLFNBQVNOLFdBQVdRLEVBQVVDLEdBQzVCRCxFQUFTbkMsUUFBU3FDLElBQ2hCLE1BQU1KLEVBQVNDLGFBQWFHLEdBQzVCRCxFQUFjckIsWUFBWWtCLEtBSTlCLFNBQVNDLGFBQWEvQyxHQUNwQixNQUFNOEMsRUFBUzVFLFNBQVN1RCxjQUFjLFVBSXRDLE9BSEFxQixFQUFPOUMsTUFBUUEsRUFDZjhDLEVBQU9LLFlBQWNuRCxFQUVkOEMsRUFuT1Q1RSxTQUFTcUIsaUJBQWlCLG1CQUFvQkoiLCJmaWxlIjoiYXBwLmpzIiwic291cmNlc0NvbnRlbnQiOlsiLy8gVmFyaWFibGVzIG5hdmVnYWNpb25cclxuY29uc3Qgc2VhcmNoSWNvbiA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoYCNzZWFyY2gtaWNvbmApO1xyXG5jb25zdCBoYW1idXJndWVyQnRuID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihgLmhhbWJ1cmd1ZXJgKTtcclxuXHJcbi8vIFZhcmlhYmxlcyBmaWx0cm8gZGUgYnVzcXVlZGFcclxuY29uc3QgYnJhbmRTZWxlY3QgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKGAjYnJhbmRgKTtcclxuY29uc3QgeWVhclNlbGVjdCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoYCN5ZWFyYCk7XHJcbmNvbnN0IG1pblByaWNlID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihgI21pbmApO1xyXG5jb25zdCBtYXhQcmljZSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoYCNtYXhgKTtcclxuY29uc3QgZG9vcnNTZWxlY3QgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKGAjZG9vcnNgKTtcclxuY29uc3QgdHJhbnNtaXNzaW9uU2VsZWN0ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihgI3RyYW5zbWlzc2lvbmApO1xyXG5jb25zdCBjb2xvclNlbGVjdCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoYCNjb2xvcmApO1xyXG5cclxuLy8gQ29udGVuZWRvciBkZSByZXN1bHRhZG9zXHJcbmNvbnN0IHJlc3VsdHMgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKGAjcmVzdWx0c2ApO1xyXG5cclxuY29uc3Qgc2VhcmNoRGF0YSA9IHtcclxuICB5ZWFyOiBgYCxcclxuICBicmFuZDogYGAsXHJcbiAgbWluUHJpY2U6IGBgLFxyXG4gIG1heFByaWNlOiBgYCxcclxuICBkb29yczogYGAsXHJcbiAgdHJhbnNtaXNzaW9uOiBgYCxcclxuICBjb2xvcjogYGAsXHJcbn07XHJcblxyXG4vLyBFdmVudG9zXHJcbmRvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIoYERPTUNvbnRlbnRMb2FkZWRgLCBzdGFydEFwcCk7XHJcblxyXG5mdW5jdGlvbiBzdGFydEFwcCgpIHtcclxuICBldmVudExpc3RlbmVycygpO1xyXG4gIHNob3dDYXJzKGNhcnMpO1xyXG59XHJcblxyXG5mdW5jdGlvbiBldmVudExpc3RlbmVycygpIHtcclxuICAvLyBFdmVudG9zIGRlbCBzZWFyY2hCYXIgeSBOYXYuXHJcblxyXG4gIHNlYXJjaEljb24uYWRkRXZlbnRMaXN0ZW5lcihgY2xpY2tgLCBvcGVuU2VhcmNoYmFyKTtcclxuICBoYW1idXJndWVyQnRuLmFkZEV2ZW50TGlzdGVuZXIoYGNsaWNrYCwgb3Blbk5hdik7XHJcblxyXG4gIC8vIENlcnJhciBlbCBzZWFyY2hiYXIgeSBlbCBuYXYgYWwgaGFjZXIgY2xpY2sgZW4gY3VhbHF1aWVyIHBhcnRlIGRlbCBkb2N1bWVudG8uXHJcbiAgd2luZG93LmFkZEV2ZW50TGlzdGVuZXIoYGNsaWNrYCwgY2xvc2VPdXRzaWRlQ2xpY2spO1xyXG4gIC8vIENhbWJpYXIgZWwgY29sb3IgZGVsIGhlYWRlciBhbCBoYWNlciBzY3JvbGwuXHJcbiAgd2luZG93LmFkZEV2ZW50TGlzdGVuZXIoYHNjcm9sbGAsIGNvbG9ySGVhZGVyU2Nyb2xsKTtcclxuXHJcbiAgLy8gRXZlbnRvcyBwYXJhIGVsIGZpbHRybyBkZSBiw7pzcXVlZGEuXHJcbiAgYnJhbmRTZWxlY3QuYWRkRXZlbnRMaXN0ZW5lcihgY2hhbmdlYCwgKGUpID0+IHtcclxuICAgIGNvbnN0IHNlbGVjdGVkVmFsdWUgPSBlLnRhcmdldC52YWx1ZTtcclxuXHJcbiAgICBzZWFyY2hEYXRhLmJyYW5kID0gc2VsZWN0ZWRWYWx1ZTtcclxuICB9KTtcclxuXHJcbiAgeWVhclNlbGVjdC5hZGRFdmVudExpc3RlbmVyKGBjaGFuZ2VgLCAoZSkgPT4ge1xyXG4gICAgY29uc3Qgc2VsZWN0ZWRWYWx1ZSA9IGUudGFyZ2V0LnZhbHVlO1xyXG5cclxuICAgIHNlYXJjaERhdGEueWVhciA9IHNlbGVjdGVkVmFsdWU7XHJcbiAgfSk7XHJcblxyXG4gIG1pblByaWNlLmFkZEV2ZW50TGlzdGVuZXIoYGNoYW5nZWAsIChlKSA9PiB7XHJcbiAgICBjb25zdCBzZWxlY3RlZFZhbHVlID0gZS50YXJnZXQudmFsdWU7XHJcblxyXG4gICAgc2VhcmNoRGF0YS5taW5QcmljZSA9IHNlbGVjdGVkVmFsdWU7XHJcbiAgfSk7XHJcblxyXG4gIG1heFByaWNlLmFkZEV2ZW50TGlzdGVuZXIoYGNoYW5nZWAsIChlKSA9PiB7XHJcbiAgICBjb25zdCBzZWxlY3RlZFZhbHVlID0gZS50YXJnZXQudmFsdWU7XHJcblxyXG4gICAgc2VhcmNoRGF0YS5tYXhQcmljZSA9IHNlbGVjdGVkVmFsdWU7XHJcbiAgfSk7XHJcblxyXG4gIGRvb3JzU2VsZWN0LmFkZEV2ZW50TGlzdGVuZXIoYGNoYW5nZWAsIChlKSA9PiB7XHJcbiAgICBjb25zdCBzZWxlY3RlZFZhbHVlID0gZS50YXJnZXQudmFsdWU7XHJcblxyXG4gICAgc2VhcmNoRGF0YS5kb29ycyA9IHNlbGVjdGVkVmFsdWU7XHJcbiAgfSk7XHJcblxyXG4gIHRyYW5zbWlzc2lvblNlbGVjdC5hZGRFdmVudExpc3RlbmVyKGBjaGFuZ2VgLCAoZSkgPT4ge1xyXG4gICAgY29uc3Qgc2VsZWN0ZWRWYWx1ZSA9IGUudGFyZ2V0LnZhbHVlO1xyXG5cclxuICAgIHNlYXJjaERhdGEudHJhbnNtaXNzaW9uID0gc2VsZWN0ZWRWYWx1ZTtcclxuICB9KTtcclxuXHJcbiAgY29sb3JTZWxlY3QuYWRkRXZlbnRMaXN0ZW5lcihgY2hhbmdlYCwgKGUpID0+IHtcclxuICAgIGNvbnN0IHNlbGVjdGVkVmFsdWUgPSBlLnRhcmdldC52YWx1ZTtcclxuXHJcbiAgICBzZWFyY2hEYXRhLmNvbG9yID0gc2VsZWN0ZWRWYWx1ZTtcclxuICB9KTtcclxuXHJcbiAgLy8gY29uc29sZS5sb2coc2VhcmNoRGF0YSk7XHJcbn1cclxuXHJcbi8vIEZ1bmNpb25lc1xyXG5mdW5jdGlvbiBvcGVuU2VhcmNoYmFyKCkge1xyXG4gIGNvbnN0IHNlYXJjaEJveCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoYCNzZWFyY2gtYm94YCk7XHJcblxyXG4gIHNlYXJjaEJveC5jbGFzc0xpc3QudG9nZ2xlKGBzZWFyY2gtYm94LS1hY3RpdmVgKTtcclxuICBzZWFyY2hCb3guY2xhc3NMaXN0LnRvZ2dsZShgc2VhcmNoLWJveF9fY29udGVuZWRvcmApO1xyXG59XHJcblxyXG5mdW5jdGlvbiBvcGVuTmF2KCkge1xyXG4gIGNvbnN0IG5hdiA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoYC5uYXZgKTtcclxuXHJcbiAgbmF2LmNsYXNzTGlzdC50b2dnbGUoYG5hdi0tYWN0aXZlYCk7XHJcbn1cclxuXHJcbmZ1bmN0aW9uIGNsb3NlT3V0c2lkZUNsaWNrKGUpIHtcclxuICBjb25zdCByZWZlcmVuY2UgPSBlLnRhcmdldDtcclxuICBjb25zdCBzZWFyY2hCb3ggPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKGAjc2VhcmNoLWJveGApO1xyXG4gIGNvbnN0IG5hdiA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoYC5uYXZgKTtcclxuXHJcbiAgLyogXHJcbiAgICAgMS0gVmVyaWZpY2Egc2kgZWwgc2VhcmNoYmFyIGVzdMOhIGFiaWVydG8uXHJcbiAgICAgMi0gUmV2aXNhIHNpIGVsIGNsaWNrIG5vIG9jdXJyacOzIGVuIGVsIGljb25vLiBcclxuICAgICAzLSBWZSBzaSBlbCBjbGljayBubyBvY3VycmnDsyBkZW50cm8gZGVsIHNlYXJjaGJhci5cclxuICAqL1xyXG4gIGlmIChcclxuICAgIHNlYXJjaEJveC5jbGFzc0xpc3QuY29udGFpbnMoYHNlYXJjaC1ib3gtLWFjdGl2ZWApICYmXHJcbiAgICByZWZlcmVuY2UgIT09IHNlYXJjaEljb24gJiZcclxuICAgICFzZWFyY2hCb3guY29udGFpbnMocmVmZXJlbmNlKVxyXG4gICkge1xyXG4gICAgLy8gQ2llcnJhIGVsIHNlYXJjaEJhciBhbCBlbGltaW5hciBsYSBjbGFzZSBxdWUgbG8gaGFjZSB2aXNpYmxlXHJcbiAgICBzZWFyY2hCb3guY2xhc3NMaXN0LnJlbW92ZShgc2VhcmNoLWJveC0tYWN0aXZlYCwgYHNlYXJjaC1ib3hfX2NvbnRlbmVkb3JgKTtcclxuICB9XHJcblxyXG4gIC8qIFxyXG4gICAgMS0gVmVyaWZpY2Egc2kgbGEgY2xhc2UgYG5hdi0tYWN0aXZlYCBleGlzdGUuXHJcbiAgICAyLSBSZXZpc2Egc2kgZWwgY2xpY2sgbm8gb2N1cnJpw7MgZW4gZWwgYm90b24gaGFtYnVyZ3Vlc2EuXHJcbiAgKi9cclxuICBpZiAobmF2LmNsYXNzTGlzdC5jb250YWlucyhgbmF2LS1hY3RpdmVgKSAmJiByZWZlcmVuY2UgIT09IGhhbWJ1cmd1ZXJCdG4pIHtcclxuICAgIG5hdi5jbGFzc0xpc3QucmVtb3ZlKGBuYXYtLWFjdGl2ZWApO1xyXG4gIH1cclxuXHJcbiAgY2xvc2VPblNjcm9sbChuYXYsIHNlYXJjaEJveCk7XHJcbn1cclxuXHJcbmZ1bmN0aW9uIGNsb3NlT25TY3JvbGwobmF2LCBzZWFyY2hCb3gpIHtcclxuICB3aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcihgc2Nyb2xsYCwgKCkgPT4ge1xyXG4gICAgbmF2LmNsYXNzTGlzdC5yZW1vdmUoYG5hdi0tYWN0aXZlYCk7XHJcbiAgICBzZWFyY2hCb3guY2xhc3NMaXN0LnJlbW92ZShgc2VhcmNoLWJveC0tYWN0aXZlYCwgYHNlYXJjaC1ib3hfX2NvbnRlbmVkb3JgKTtcclxuICB9KTtcclxufVxyXG5cclxuZnVuY3Rpb24gY29sb3JIZWFkZXJTY3JvbGwoKSB7XHJcbiAgY29uc3QgaGVhZGVyID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihgLmhlYWRlcmApO1xyXG4gIGNvbnN0IHNjcm9sbFBvc2l0aW9uID0gd2luZG93LnNjcm9sbFk7XHJcblxyXG4gIGlmIChzY3JvbGxQb3NpdGlvbiA+IDkwKSB7XHJcbiAgICBoZWFkZXIuc3R5bGUuYmFja2dyb3VuZENvbG9yID0gXCJXaGl0ZVwiO1xyXG4gICAgc2VhcmNoSWNvbi5zdHlsZS5jb2xvciA9IGBCbGFja2A7XHJcblxyXG4gICAgcmV0dXJuO1xyXG4gIH1cclxuXHJcbiAgaGVhZGVyLnN0eWxlLmJhY2tncm91bmRDb2xvciA9IGB0cmFuc3BhcmVudGA7XHJcbiAgc2VhcmNoSWNvbi5zdHlsZS5jb2xvciBgaW5oZXJpdGBcclxufVxyXG5cclxuZnVuY3Rpb24gc2hvd0NhcnMoY2Fycykge1xyXG4gIGNhcnMuZm9yRWFjaCgoY2FyKSA9PiB7XHJcbiAgICBjb25zdCB7IGltZywgeWVhciwgYnJhbmQsIG1vZGVsLCBwcmljZSwgZG9vcnMsIHRyYW5zbWlzc2lvbiB9ID0gY2FyO1xyXG4gICAgbGV0IHJhbmRvbU51bWJlciA9IE1hdGguZmxvb3IoTWF0aC5yYW5kb20oKSAqIDEwMSk7XHJcbiAgICBjb25zdCBjYXJDYXJkID0gYFxyXG4gICAgICAgIDxwaWN0dXJlPlxyXG4gICAgICAgICAgPHNvdXJjZSBzcmNzZXQ9XCIke2ltZ30uYXZpZlwiIHR5cGU9XCJpbWFnZS9hdmlmXCIgLz5cclxuICAgICAgICAgIDxzb3VyY2Ugc3Jjc2V0PVwiJHtpbWd9LndlYnBcIiB0eXBlPVwiaW1hZ2Uvd2VicFwiIC8+XHJcbiAgICAgICAgICA8aW1nXHJcbiAgICAgICAgICAgIGNsYXNzPVwiY2FyX19pbWdcIlxyXG4gICAgICAgICAgICBsb2FkaW5nPVwibGF6eVwiXHJcbiAgICAgICAgICAgIHdpZHRoPVwiNTAwXCJcclxuICAgICAgICAgICAgaGVpZ2h0PVwiMzAwXCJcclxuICAgICAgICAgICAgc3JjPVwiJHtpbWd9LmpwZ1wiXHJcbiAgICAgICAgICAgIGFsdD1cIlwiXHJcbiAgICAgICAgICAvPlxyXG4gICAgICAgIDwvcGljdHVyZT5cclxuICAgICAgICA8c3BhbiBjbGFzcz1cImNhcl9feWVhclwiPiR7eWVhcn08L3NwYW4+XHJcbiAgICAgICAgPGRpdiBjbGFzcz1cImNhcl9fY29udGVudFwiPlxyXG4gICAgICAgICAgPGgyIGNsYXNzPVwiY2FyX19tb2RlbFwiPiR7YnJhbmR9ICR7bW9kZWx9PC9oMj5cclxuICAgICAgICAgIDxwIGNsYXNzPVwiY2FyX19wcmljZVwiPlxyXG4gICAgICAgICAgICAkJHtwcmljZS50b0xvY2FsZVN0cmluZygpfVxyXG4gICAgICAgICAgICA8aSBjbGFzcz1cImJ4IGJ4cy1zdGFyIGNhcl9fcHJpY2UtLXJldmlld3NcIj4oJHtyYW5kb21OdW1iZXJ9IFJlc2XDsWFzKTwvaT5cclxuICAgICAgICAgIDwvcD5cclxuICAgICAgICAgIDxwIGNsYXNzPVwiY2FyX19jaGFyYWN0ZXJcIj5cclxuICAgICAgICAgICAgPGkgY2xhc3M9XCJieCBieHMtZG9vci1vcGVuIGNhcl9faWNvblwiPjwvaT5cclxuICAgICAgICAgICAgJHtkb29yc30gUHVlcnRhc1xyXG4gICAgICAgICAgPC9wPlxyXG4gICAgICAgICAgPHAgY2xhc3M9XCJjYXJfX2NoYXJhY3RlclwiPlxyXG4gICAgICAgICAgICA8aSBjbGFzcz1cImJ4IGJ4cy1jYXIgY2FyX19pY29uXCI+PC9pPlxyXG4gICAgICAgICAgICAke3RyYW5zbWlzc2lvbn1cclxuICAgICAgICAgIDwvcD5cclxuICAgICAgICAgIDxkaXYgY2xhc3M9XCJjYXJfX2J0bnNcIj5cclxuICAgICAgICAgICAgPGEgaHJlZj1cIiNcIiBjbGFzcz1cImNhcl9fYnRuXCI+Q29tcHJhcjwvYT5cclxuICAgICAgICAgICAgPGEgaHJlZj1cIiNcIiBjbGFzcz1cImNhcl9fZGV0YWlsc1wiPlZlciBkZXRhbGxlczwvYT5cclxuICAgICAgICAgIDwvZGl2PlxyXG4gICAgICAgIDwvZGl2PlxyXG5gO1xyXG5cclxuICAgIGNvbnN0IGNhckhUTUwgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KGBkaXZgKTtcclxuICAgIGNhckhUTUwuY2xhc3NMaXN0LmFkZChgY2FyYCk7XHJcbiAgICBjYXJIVE1MLmlubmVySFRNTCA9IGNhckNhcmQ7XHJcblxyXG4gICAgcmVzdWx0cy5hcHBlbmRDaGlsZChjYXJIVE1MKTtcclxuICB9KTtcclxuXHJcbiAgZmlsbENhcnNTZWxlY3RzKGNhcnMpO1xyXG59XHJcblxyXG5mdW5jdGlvbiBmaWxsQ2Fyc1NlbGVjdHMoY2Fycykge1xyXG4gIGxldCBjYXJCcmFuZHMgPSBjYXJzXHJcbiAgICAubWFwKCh7IGJyYW5kIH0pID0+IGJyYW5kKVxyXG4gICAgLmZpbHRlcigoYnJhbmQsIGluZGV4LCBjYXJCcmFuZHMpID0+IGNhckJyYW5kcy5pbmRleE9mKGJyYW5kKSA9PT0gaW5kZXgpO1xyXG5cclxuICBsZXQgY2FyRG9vcnMgPSBbXTtcclxuICBsZXQgY2FyQ29sb3JzID0gW107XHJcblxyXG4gIGNhcnMuZm9yRWFjaCgoY2FyKSA9PiB7XHJcbiAgICBjb25zdCB7IGRvb3JzLCBjb2xvciB9ID0gY2FyO1xyXG5cclxuICAgIGlmICghY2FyRG9vcnMuaW5jbHVkZXMoZG9vcnMpKSB7XHJcbiAgICAgIGNhckRvb3JzLnB1c2goZG9vcnMpO1xyXG4gICAgfVxyXG5cclxuICAgIGlmICghY2FyQ29sb3JzLmluY2x1ZGVzKGNvbG9yKSkge1xyXG4gICAgICBjYXJDb2xvcnMucHVzaChjb2xvcik7XHJcbiAgICB9XHJcbiAgfSk7XHJcblxyXG4gIGZpbGxZZWFyU2VsZWN0KCk7XHJcbiAgZmlsbFNlbGVjdChjYXJCcmFuZHMsIGJyYW5kU2VsZWN0KTtcclxuICBmaWxsU2VsZWN0KGNhckRvb3JzLCBkb29yc1NlbGVjdCk7XHJcbiAgZmlsbFNlbGVjdChjYXJDb2xvcnMsIGNvbG9yU2VsZWN0KTtcclxufVxyXG5cclxuZnVuY3Rpb24gZmlsbFllYXJTZWxlY3QoKSB7XHJcbiAgY29uc3QgeWVhck1heCA9IG5ldyBEYXRlKCkuZ2V0RnVsbFllYXIoKTtcclxuICBjb25zdCB5ZWFyTWluID0geWVhck1heCAtIDEwO1xyXG5cclxuICBmb3IgKGxldCBpID0geWVhck1heDsgaSA+PSB5ZWFyTWluOyBpLS0pIHtcclxuICAgIGNvbnN0IG9wdGlvbiA9IGNyZWF0ZU9wdGlvbihpKTtcclxuICAgIHllYXJTZWxlY3QuYXBwZW5kQ2hpbGQob3B0aW9uKTtcclxuICB9XHJcbn1cclxuXHJcbmZ1bmN0aW9uIGZpbGxTZWxlY3QoY2Fyc0RhdGEsIHNlbGVjdEVsZW1lbnQpIHtcclxuICBjYXJzRGF0YS5mb3JFYWNoKChjYXJEYXRhKSA9PiB7XHJcbiAgICBjb25zdCBvcHRpb24gPSBjcmVhdGVPcHRpb24oY2FyRGF0YSk7XHJcbiAgICBzZWxlY3RFbGVtZW50LmFwcGVuZENoaWxkKG9wdGlvbik7XHJcbiAgfSk7XHJcbn1cclxuXHJcbmZ1bmN0aW9uIGNyZWF0ZU9wdGlvbih2YWx1ZSkge1xyXG4gIGNvbnN0IG9wdGlvbiA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoYG9wdGlvbmApO1xyXG4gIG9wdGlvbi52YWx1ZSA9IHZhbHVlO1xyXG4gIG9wdGlvbi50ZXh0Q29udGVudCA9IHZhbHVlO1xyXG5cclxuICByZXR1cm4gb3B0aW9uO1xyXG59XHJcbiJdfQ==
